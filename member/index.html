<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Dashboard - Sailing Club Partnership</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="navbar-brand">
                <span class="sailing-icon">‚õµ</span>
                Sailing Club Partnership
            </a>
            <ul class="navbar-nav">
                <li><a href="index.html" class="active">Dashboard</a></li>
                <li><a href="offers.html">Browse Offers</a></li>
                <li><a href="savings.html">My Savings</a></li>
                <li><a href="#" onclick="logout()">Logout</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container" style="padding: 2rem 0;">
        <!-- Welcome Section -->
        <section class="card">
            <h1>Welcome back, Zafer Gunel!</h1>
            <p style="color: var(--text-light); font-size: 1.1rem;">
                Ready to discover your next savings opportunity?
            </p>
        </section>

        <!-- Quick Stats -->
        <section class="grid grid-3" style="margin: 2rem 0;">
            <div class="metric-card">
                <div class="metric-value">$127</div>
                <div class="metric-label">Saved This Month</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">$892</div>
                <div class="metric-label">Total Savings</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">23</div>
                <div class="metric-label">Transactions</div>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="card">
            <div class="card-header">
                <h2>Recent Activity</h2>
            </div>
            <div class="recent-transactions">
                <div class="transaction-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #e5e7eb;">
                    <div>
                        <h4>Sunger Pizza</h4>
                        <p style="color: var(--text-light); font-size: 0.9rem;">15% off all meals</p>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: var(--secondary-green); font-weight: 600;">-$6.75</div>
                        <div style="color: var(--text-light); font-size: 0.9rem;">Sep 13</div>
                    </div>
                </div>
                <div class="transaction-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #e5e7eb;">
                    <div>
                        <h4>Marina Club</h4>
                        <p style="color: var(--text-light); font-size: 0.9rem;">Buy one, get one appetizer</p>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: var(--secondary-green); font-weight: 600;">-$12.00</div>
                        <div style="color: var(--text-light); font-size: 0.9rem;">Sep 12</div>
                    </div>
                </div>
                <div class="transaction-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem;">
                    <div>
                        <h4>Seckin Konaklar</h4>
                        <p style="color: var(--text-light); font-size: 0.9rem;">20% off weekend stays</p>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: var(--secondary-green); font-weight: 600;">-$40.00</div>
                        <div style="color: var(--text-light); font-size: 0.9rem;">Sep 10</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="grid grid-2" style="margin: 2rem 0;">
            <div class="card text-center">
                <div class="sailing-icon" style="font-size: 3rem; margin-bottom: 1rem;">üîç</div>
                <h3>Browse Offers</h3>
                <p>Discover exclusive discounts from local partners</p>
                <a href="offers.html" class="btn btn-primary" style="margin-top: 1rem;">View All Offers</a>
            </div>
            <div class="card text-center">
                <div class="sailing-icon" style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                <h3>View Savings</h3>
                <p>Track your savings and transaction history</p>
                <a href="savings.html" class="btn btn-secondary" style="margin-top: 1rem;">View Savings</a>
            </div>
        </section>

        <!-- Featured Offers -->
        <section class="card">
            <div class="card-header">
                <h2>Featured Offers</h2>
                <p style="color: var(--text-light);">Popular discounts from our partners</p>
            </div>
            <div class="grid grid-3">
                <div class="offer-card">
                    <div class="offer-title">15% off all meals</div>
                    <div class="offer-discount">Sunger Pizza</div>
                    <div class="offer-description">Valid for lunch and dinner. Cannot be combined with other offers.</div>
                    <a href="offers.html" class="btn btn-primary">View Offer</a>
                </div>
                <div class="offer-card">
                    <div class="offer-title">20% off weekend stays</div>
                    <div class="offer-discount">Seckin Konaklar</div>
                    <div class="offer-description">Enjoy 20% off your weekend accommodation at Seckin Konaklar.</div>
                    <a href="offers.html" class="btn btn-primary">View Offer</a>
                </div>
                <div class="offer-card">
                    <div class="offer-title">10% off boat repairs</div>
                    <div class="offer-discount">Bodrum Milta Marina</div>
                    <div class="offer-description">Save 10% on all marine repair services and maintenance.</div>
                    <a href="offers.html" class="btn btn-primary">View Offer</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="background-color: var(--primary-blue); color: var(--white); padding: 2rem 0; margin-top: 4rem;">
        <div class="container text-center">
            <p>&copy; 2025 Sailing Club Partnership Platform. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Logout functionality
        function logout() {
            localStorage.removeItem('selectedRole');
            window.location.href = '../index.html';
        }

        // Load member data
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in as member
            const currentRole = localStorage.getItem('selectedRole');
            if (currentRole !== 'member') {
                window.location.href = '../index.html';
                return;
            }

            // Load member data from JSON
            loadMemberData();
        });

        async function loadMemberData() {
            try {
                const response = await fetch('../assets/data/users.json');
                const data = await response.json();
                
                // Find Zafer Gunel (demo user)
                const member = data.members.find(m => m.id === 'm001');
                if (member) {
                    // Update welcome message
                    document.querySelector('h1').textContent = `Welcome back, ${member.name}!`;
                    
                    // Update metrics
                    document.querySelector('.metric-value').textContent = `$${member.monthly_savings}`;
                    document.querySelectorAll('.metric-value')[1].textContent = `$${member.total_savings}`;
                    document.querySelectorAll('.metric-value')[2].textContent = member.transactions_count;
                }
            } catch (error) {
                console.error('Error loading member data:', error);
            }
        }
    </script>
</body>
</html>
